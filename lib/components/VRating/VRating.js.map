{"version":3,"sources":["../../../src/components/VRating/VRating.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\r\nimport '../../stylus/components/_rating.styl'\r\n\r\n// Components\r\nimport VIcon from '../VIcon'\r\n\r\n// Mixins\r\nimport Colorable from '../../mixins/colorable'\r\nimport Delayable from '../../mixins/delayable'\r\nimport Sizeable from '../../mixins/sizeable'\r\nimport Rippleable from '../../mixins/rippleable'\r\nimport Themeable from '../../mixins/themeable'\r\n\r\n// Utilities\r\nimport { createRange } from '../../util/helpers'\r\nimport mixins from '../../util/mixins'\r\n\r\n// Types\r\nimport { VNode, VNodeDirective, VNodeChildren } from 'vue'\r\n\r\ntype ItemSlotProps = {\r\n  index: number\r\n  value: number\r\n  isFilled: boolean\r\n  isHalfFilled?: boolean | undefined\r\n  isHovered: boolean\r\n  isHalfHovered?: boolean | undefined\r\n  click: Function\r\n}\r\n\r\n/* @vue/component */\r\nexport default mixins(\r\n  Colorable,\r\n  Delayable,\r\n  Rippleable,\r\n  Sizeable,\r\n  Themeable\r\n).extend({\r\n  name: 'v-rating',\r\n\r\n  props: {\r\n    backgroundColor: {\r\n      type: String,\r\n      default: 'accent'\r\n    },\r\n    color: {\r\n      type: String,\r\n      default: 'primary'\r\n    },\r\n    dense: Boolean,\r\n    emptyIcon: {\r\n      type: String,\r\n      default: '$vuetify.icons.ratingEmpty'\r\n    },\r\n    fullIcon: {\r\n      type: String,\r\n      default: '$vuetify.icons.ratingFull'\r\n    },\r\n    halfIcon: {\r\n      type: String,\r\n      default: '$vuetify.icons.ratingHalf'\r\n    },\r\n    halfIncrements: Boolean,\r\n    length: {\r\n      type: [Number, String],\r\n      default: 5\r\n    },\r\n    clearable: Boolean,\r\n    readonly: Boolean,\r\n    hover: Boolean,\r\n    value: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      hoverIndex: -1,\r\n      internalValue: this.value\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    directives (): VNodeDirective[] {\r\n      if (this.readonly || !this.ripple) return []\r\n\r\n      return [{\r\n        name: 'ripple',\r\n        value: { circle: true }\r\n      } as VNodeDirective]\r\n    },\r\n    iconProps (): object {\r\n      const {\r\n        dark,\r\n        medium,\r\n        large,\r\n        light,\r\n        small,\r\n        size,\r\n        xLarge\r\n      } = this.$props\r\n\r\n      return {\r\n        dark,\r\n        medium,\r\n        large,\r\n        light,\r\n        size,\r\n        small,\r\n        xLarge\r\n      }\r\n    },\r\n    isHovering (): boolean {\r\n      return this.hover && this.hoverIndex >= 0\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    internalValue (val) {\r\n      val !== this.value && this.$emit('input', val)\r\n    },\r\n    value (val) {\r\n      this.internalValue = val\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    createClickFn (i: number): Function {\r\n      return (e: MouseEvent) => {\r\n        if (this.readonly) return\r\n\r\n        const newValue = this.genHoverIndex(e, i)\r\n        if (this.clearable && this.internalValue === newValue) {\r\n          this.internalValue = 0\r\n        } else {\r\n          this.internalValue = newValue\r\n        }\r\n      }\r\n    },\r\n    createProps (i: number): ItemSlotProps {\r\n      const props: ItemSlotProps = {\r\n        index: i,\r\n        value: this.internalValue,\r\n        click: this.createClickFn(i),\r\n        isFilled: Math.floor(this.internalValue) > i,\r\n        isHovered: Math.floor(this.hoverIndex) > i\r\n      }\r\n\r\n      if (this.halfIncrements) {\r\n        props.isHalfHovered = !props.isHovered && (this.hoverIndex - i) % 1 > 0\r\n        props.isHalfFilled = !props.isFilled && (this.internalValue - i) % 1 > 0\r\n      }\r\n\r\n      return props\r\n    },\r\n    genHoverIndex (e: MouseEvent, i: number) {\r\n      return i + (this.isHalfEvent(e) ? 0.5 : 1)\r\n    },\r\n    getIconName (props: ItemSlotProps): string {\r\n      const isFull = this.isHovering ? props.isHovered : props.isFilled\r\n      const isHalf = this.isHovering ? props.isHalfHovered : props.isHalfFilled\r\n\r\n      return isFull ? this.fullIcon : isHalf ? this.halfIcon : this.emptyIcon\r\n    },\r\n    getColor (props: ItemSlotProps): string {\r\n      if (this.isHovering) {\r\n        if (props.isHovered || props.isHalfHovered) return this.color\r\n      } else {\r\n        if (props.isFilled || props.isHalfFilled) return this.color\r\n      }\r\n\r\n      return this.backgroundColor\r\n    },\r\n    isHalfEvent (e: MouseEvent): boolean {\r\n      if (this.halfIncrements) {\r\n        const rect = e.target && (e.target as HTMLElement).getBoundingClientRect()\r\n        if (rect && (e.pageX - rect.left) < rect.width / 2) return true\r\n      }\r\n\r\n      return false\r\n    },\r\n    onMouseEnter (e: MouseEvent, i: number): void {\r\n      this.runDelay('open', () => {\r\n        this.hoverIndex = this.genHoverIndex(e, i)\r\n      })\r\n    },\r\n    onMouseLeave (): void {\r\n      this.runDelay('close', () => (this.hoverIndex = -1))\r\n    },\r\n    genItem (i: number): VNode | VNodeChildren | string {\r\n      const props = this.createProps(i)\r\n\r\n      if (this.$scopedSlots.item) return this.$scopedSlots.item(props)\r\n\r\n      const listeners: Record<string, Function> = {\r\n        click: props.click\r\n      }\r\n\r\n      if (this.hover) {\r\n        listeners.mouseenter = (e: MouseEvent) => this.onMouseEnter(e, i)\r\n        listeners.mouseleave = this.onMouseLeave\r\n\r\n        if (this.halfIncrements) {\r\n          listeners.mousemove = (e: MouseEvent) => this.onMouseEnter(e, i)\r\n        }\r\n      }\r\n\r\n      return this.$createElement(VIcon, this.setTextColor(this.getColor(props), {\r\n        directives: this.directives,\r\n        props: this.iconProps,\r\n        on: listeners\r\n      }), [this.getIconName(props)])\r\n    }\r\n  },\r\n\r\n  render (h): VNode {\r\n    const children = createRange(Number(this.length)).map(i => this.genItem(i))\r\n\r\n    return h('div', {\r\n      staticClass: 'v-rating',\r\n      class: {\r\n        'v-rating--readonly': this.readonly,\r\n        'v-rating--dense': this.dense\r\n      }\r\n    }, children)\r\n  }\r\n})\r\n"],"sourceRoot":""}