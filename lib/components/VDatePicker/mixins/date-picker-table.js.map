{"version":3,"sources":["../../../../src/components/VDatePicker/mixins/date-picker-table.ts"],"names":[],"mappings":"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","sourcesContent":["import '../../../stylus/components/_date-picker-table.styl'\r\n\r\n// Directives\r\nimport Touch, { TouchWrapper } from '../../../directives/touch'\r\n\r\n// Mixins\r\nimport Colorable from '../../../mixins/colorable'\r\nimport Themeable from '../../../mixins/themeable'\r\n\r\n// Utils\r\nimport isDateAllowed, { AllowedDateFunction } from '../util/isDateAllowed'\r\nimport isDateInRange from '../util/isDateInRange'\r\nimport mixins from '../../../util/mixins'\r\n\r\n// Types\r\nimport { VNodeChildren } from 'vue'\r\nimport { PropValidator } from 'vue/types/options'\r\nimport { DatePickerFormatter } from '../util/createNativeLocaleFormatter'\r\nimport { DateEvents, DateEventColors, DateEventColorValue } from '../VDatePicker'\r\n\r\ntype CalculateTableDateFunction = (v: number) => string\r\n\r\nexport default mixins(\r\n  Colorable,\r\n  Themeable\r\n/* @vue/component */\r\n).extend({\r\n  directives: { Touch },\r\n\r\n  props: {\r\n    allowedDates: Function as PropValidator<AllowedDateFunction | undefined>,\r\n    current: String,\r\n    disabled: Boolean,\r\n    format: Function as PropValidator<DatePickerFormatter | undefined>,\r\n    events: {\r\n      type: [Array, Function, Object],\r\n      default: () => null\r\n    } as any as PropValidator<DateEvents>,\r\n    eventColor: {\r\n      type: [Array, Function, Object, String],\r\n      default: () => 'warning'\r\n    } as any as PropValidator<DateEventColors>,\r\n    locale: {\r\n      type: String,\r\n      default: 'en-us'\r\n    },\r\n    min: String,\r\n    max: String,\r\n    readonly: Boolean,\r\n    scrollable: Boolean,\r\n    tableDate: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    value: [String, Array]\r\n  },\r\n\r\n  data: () => ({\r\n    isReversing: false\r\n  }),\r\n\r\n  computed: {\r\n    computedTransition (): string {\r\n      return (this.isReversing === !this.$vuetify.rtl) ? 'tab-reverse-transition' : 'tab-transition'\r\n    },\r\n    displayedMonth (): number {\r\n      return Number(this.tableDate.split('-')[1]) - 1\r\n    },\r\n    displayedYear (): number {\r\n      return Number(this.tableDate.split('-')[0])\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    tableDate (newVal: string, oldVal: string) {\r\n      this.isReversing = newVal < oldVal\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    genButtonClasses (isAllowed: boolean, isFloating: boolean, isSelected: boolean, isCurrent: boolean) {\r\n      return {\r\n        'v-btn--active': isSelected,\r\n        'v-btn--flat': !isSelected,\r\n        'v-btn--icon': isSelected && isAllowed && isFloating,\r\n        'v-btn--floating': isFloating,\r\n        'v-btn--depressed': !isFloating && isSelected,\r\n        'v-btn--disabled': !isAllowed || (this.disabled && isSelected),\r\n        'v-btn--outline': isCurrent && !isSelected,\r\n        ...this.themeClasses\r\n      }\r\n    },\r\n    genButtonEvents (value: string, isAllowed: boolean, mouseEventType: string) {\r\n      if (this.disabled) return undefined\r\n\r\n      return {\r\n        click: () => {\r\n          isAllowed && !this.readonly && this.$emit('input', value)\r\n          this.$emit(`click:${mouseEventType}`, value)\r\n        },\r\n        dblclick: () => this.$emit(`dblclick:${mouseEventType}`, value)\r\n      }\r\n    },\r\n    genButton (value: string, isFloating: boolean, mouseEventType: string, formatter: DatePickerFormatter) {\r\n      const isAllowed = isDateAllowed(value, this.min, this.max, this.allowedDates)\r\n      const isSelected = value === this.value || (Array.isArray(this.value) && this.value.indexOf(value) !== -1)\r\n      const isCurrent = value === this.current\r\n      const setColor = isSelected ? this.setBackgroundColor : this.setTextColor\r\n\r\n      //AT -> Added support for date-range\r\n      //const color = (isSelected || isCurrent) && (this.color || 'accent')\r\n      const color = this.getFinalColor(value, (isSelected || isCurrent) && (this.color || 'accent'))\r\n\r\n      return this.$createElement('button', setColor(color, {\r\n        staticClass: 'v-btn',\r\n        'class': this.genButtonClasses(isAllowed, isFloating, isSelected, isCurrent),\r\n        attrs: {\r\n          type: 'button'\r\n        },\r\n        domProps: {\r\n          disabled: this.disabled || !isAllowed\r\n        },\r\n        on: this.genButtonEvents(value, isAllowed, mouseEventType)\r\n      }), [\r\n        this.$createElement('div', {\r\n          staticClass: 'v-btn__content'\r\n        }, [formatter(value)]),\r\n        this.genEvents(value)\r\n      ])\r\n    },\r\n    getFinalColor (date: string, color: string | false) {\r\n      //AT -> Added support for date-range\r\n      const colorInRange = Array.isArray(this.value) && isDateInRange(date, this.value)\r\n      const colorRangeNode = Array.isArray(this.value) && (this.value.indexOf(date) === 0 || date === this.value[this.value.length -1])   \r\n      return colorRangeNode ? 'accent darken-4' : colorInRange ? 'accent darken-2' : color\r\n    },\r\n    getEventColors (date: string) {\r\n      const arrayize = (v: string | string[]) => Array.isArray(v) ? v : [v]\r\n      let eventData: boolean | DateEventColorValue\r\n      let eventColors: string[] = []\r\n\r\n      if (Array.isArray(this.events)) {\r\n        eventData = this.events.includes(date)\r\n      } else if (this.events instanceof Function) {\r\n        eventData = this.events(date) || false\r\n      } else if (this.events) {\r\n        eventData = this.events[date] || false\r\n      } else {\r\n        eventData = false\r\n      }\r\n\r\n      if (!eventData) {\r\n        return []\r\n      } else if (eventData !== true) {\r\n        eventColors = arrayize(eventData)\r\n      } else if (typeof this.eventColor === 'string') {\r\n        eventColors = [this.eventColor]\r\n      } else if (typeof this.eventColor === 'function') {\r\n        eventColors = arrayize(this.eventColor(date))\r\n      } else if (Array.isArray(this.eventColor)) {\r\n        eventColors = this.eventColor\r\n      } else {\r\n        eventColors = arrayize(this.eventColor[date])\r\n      }\r\n\r\n      return eventColors.filter(v => v)\r\n    },\r\n    genEvents (date: string) {\r\n      const eventColors = this.getEventColors(date)\r\n\r\n      return eventColors.length ? this.$createElement('div', {\r\n        staticClass: 'v-date-picker-table__events'\r\n      }, eventColors.map(color => this.$createElement('div', this.setBackgroundColor(color)))) : null\r\n    },\r\n    wheel (e: WheelEvent, calculateTableDate: CalculateTableDateFunction) {\r\n      e.preventDefault()\r\n      this.$emit('tableDate', calculateTableDate(e.deltaY))\r\n    },\r\n    touch (value: number, calculateTableDate: CalculateTableDateFunction) {\r\n      this.$emit('tableDate', calculateTableDate(value))\r\n    },\r\n    genTable (staticClass: string, children: VNodeChildren, calculateTableDate: CalculateTableDateFunction) {\r\n      const transition = this.$createElement('transition', {\r\n        props: { name: this.computedTransition }\r\n      }, [this.$createElement('table', { key: this.tableDate }, children)])\r\n\r\n      const touchDirective = {\r\n        name: 'touch',\r\n        value: {\r\n          left: (e: TouchWrapper) => (e.offsetX < -15) && this.touch(1, calculateTableDate),\r\n          right: (e: TouchWrapper) => (e.offsetX > 15) && this.touch(-1, calculateTableDate)\r\n        }\r\n      }\r\n\r\n      return this.$createElement('div', {\r\n        staticClass,\r\n        class: {\r\n          'v-date-picker-table--disabled': this.disabled,\r\n          ...this.themeClasses\r\n        },\r\n        on: (!this.disabled && this.scrollable) ? {\r\n          wheel: (e: WheelEvent) => this.wheel(e, calculateTableDate)\r\n        } : undefined,\r\n        directives: [touchDirective]\r\n      }, [transition])\r\n    }\r\n  }\r\n})\r\n"],"sourceRoot":""}