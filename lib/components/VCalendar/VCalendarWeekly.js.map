{"version":3,"sources":["../../../src/components/VCalendar/VCalendarWeekly.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\r\nimport '../../stylus/components/_calendar-weekly.styl'\r\n\r\n// Types\r\nimport { VNode, VNodeChildren } from 'vue'\r\n\r\n// Mixins\r\nimport CalendarBase from './mixins/calendar-base'\r\n\r\n// Util\r\nimport props from './util/props'\r\nimport {\r\n  VTimestamp,\r\n  VTimestampFormatter,\r\n  createDayList,\r\n  getDayIdentifier,\r\n  createNativeLocaleFormatter\r\n} from './util/timestamp'\r\n\r\n/* @vue/component */\r\nexport default CalendarBase.extend({\r\n  name: 'v-calendar-weekly',\r\n\r\n  props: props.weeks,\r\n\r\n  computed: {\r\n    staticClass (): string {\r\n      return 'v-calendar-weekly'\r\n    },\r\n    classes (): object {\r\n      return this.themeClasses\r\n    },\r\n    parsedMinWeeks (): number {\r\n      return parseInt(this.minWeeks)\r\n    },\r\n    days (): VTimestamp[] {\r\n      const minDays = this.parsedMinWeeks * this.weekdays.length\r\n      const start = this.getStartOfWeek(this.parsedStart)\r\n      const end = this.getEndOfWeek(this.parsedEnd)\r\n\r\n      return createDayList(\r\n        start,\r\n        end,\r\n        this.times.today,\r\n        this.weekdaySkips,\r\n        Number.MAX_SAFE_INTEGER,\r\n        minDays\r\n      )\r\n    },\r\n    todayWeek (): VTimestamp[] {\r\n      const today = this.times.today\r\n      const start = this.getStartOfWeek(today)\r\n      const end = this.getEndOfWeek(today)\r\n\r\n      return createDayList(\r\n        start,\r\n        end,\r\n        today,\r\n        this.weekdaySkips,\r\n        this.weekdays.length,\r\n        this.weekdays.length\r\n      )\r\n    },\r\n    monthFormatter (): VTimestampFormatter {\r\n      if (this.monthFormat) {\r\n        return this.monthFormat as VTimestampFormatter\r\n      }\r\n\r\n      const longOptions = { timeZone: 'UTC', month: 'long' }\r\n      const shortOptions = { timeZone: 'UTC', month: 'short' }\r\n\r\n      return createNativeLocaleFormatter(\r\n        this.locale,\r\n        (_tms, short) => short ? shortOptions : longOptions\r\n      )\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    isOutside (day: VTimestamp): boolean {\r\n      const dayIdentifier = getDayIdentifier(day)\r\n\r\n      return dayIdentifier < getDayIdentifier(this.parsedStart) ||\r\n             dayIdentifier > getDayIdentifier(this.parsedEnd)\r\n    },\r\n    genHead (): VNode {\r\n      return this.$createElement('div', {\r\n        staticClass: 'v-calendar-weekly__head'\r\n      }, this.genHeadDays())\r\n    },\r\n    genHeadDays (): VNode[] {\r\n      return this.todayWeek.map(this.genHeadDay)\r\n    },\r\n    genHeadDay (day: VTimestamp, index: number): VNode {\r\n      const outside = this.isOutside(this.days[index])\r\n      const color = day.present ? this.color : undefined\r\n\r\n      return this.$createElement('div', this.setTextColor(color, {\r\n        key: day.date,\r\n        staticClass: 'v-calendar-weekly__head-weekday',\r\n        class: this.getRelativeClasses(day, outside)\r\n      }), this.weekdayFormatter(day, this.shortWeekdays))\r\n    },\r\n    genWeeks (): VNode[] {\r\n      const days = this.days\r\n      const weekDays = this.weekdays.length\r\n      const weeks: VNode[] = []\r\n      for (let i = 0; i < days.length; i += weekDays) {\r\n        weeks.push(this.genWeek(days.slice(i, i + weekDays)))\r\n      }\r\n\r\n      return weeks\r\n    },\r\n    genWeek (week: VTimestamp[]): VNode {\r\n      return this.$createElement('div', {\r\n        key: week[0].date,\r\n        staticClass: 'v-calendar-weekly__week'\r\n      }, week.map(this.genDay))\r\n    },\r\n    genDay (day: VTimestamp): VNode {\r\n      const outside = this.isOutside(day)\r\n      const slot = this.$scopedSlots.day\r\n      const slotData = { outside, ...day }\r\n      const hasMonth = day.day === 1 && this.showMonthOnFirst\r\n\r\n      return this.$createElement('div', {\r\n        key: day.date,\r\n        staticClass: 'v-calendar-weekly__day',\r\n        class: this.getRelativeClasses(day, outside),\r\n        on: this.getDefaultMouseEventHandlers(':day', _e => day)\r\n      }, [\r\n        this.genDayLabel(day),\r\n        hasMonth ? this.genDayMonth(day) : '',\r\n        slot ? slot(slotData) : ''\r\n      ])\r\n    },\r\n    genDayLabel (day: VTimestamp): VNode {\r\n      const color = day.present ? this.color : undefined\r\n      const slot = this.$scopedSlots.dayLabel\r\n\r\n      return this.$createElement('div', this.setTextColor(color, {\r\n        staticClass: 'v-calendar-weekly__day-label',\r\n        on: this.getMouseEventHandlers({\r\n          'click:date': { event: 'click', stop: true },\r\n          'contextmenu:date': { event: 'contextmenu', stop: true, prevent: true, result: false }\r\n        }, _e => day)\r\n      }), slot ? slot(day) as VNodeChildren : this.dayFormatter(day, false))\r\n    },\r\n    genDayMonth (day: VTimestamp): VNode | string {\r\n      const color = day.present ? this.color : undefined\r\n      const slot = this.$scopedSlots.dayMonth\r\n\r\n      return this.$createElement('div', this.setTextColor(color, {\r\n        staticClass: 'v-calendar-weekly__day-month'\r\n      }), slot ? slot(day) as VNodeChildren : this.monthFormatter(day, this.shortMonths))\r\n    }\r\n  },\r\n\r\n  render (h): VNode {\r\n    return h('div', {\r\n      staticClass: this.staticClass,\r\n      class: this.classes,\r\n      nativeOn: {\r\n        dragstart: (e: MouseEvent) => {\r\n          e.preventDefault()\r\n        }\r\n      }\r\n    }, [\r\n      !this.hideHeader ? this.genHead() : '',\r\n      ...this.genWeeks()\r\n    ])\r\n  }\r\n})\r\n"],"sourceRoot":""}