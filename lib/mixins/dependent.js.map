{"version":3,"sources":["../../src/mixins/dependent.ts"],"names":[],"mappings":";;AAEA,OAAO,MAAP,MAAmB,gBAAnB;AAeA,SAAS,cAAT,CAAyB,QAAzB,EAAwC;AACtC,QAAM,UAAU,EAAhB;AACA,SAAK,IAAI,QAAQ,CAAjB,EAAoB,QAAQ,SAAS,MAArC,EAA6C,OAA7C,EAAsD;AACpD,YAAM,QAAQ,SAAS,KAAT,CAAd;AACA,YAAI,MAAM,QAAN,IAAkB,MAAM,WAA5B,EAAyC;AACvC,oBAAQ,IAAR,CAAa,KAAb;AACD,SAFD,MAEO;AACL,oBAAQ,IAAR,mCAAgB,eAAe,MAAM,SAArB,CAAhB;AACD;AACF;AAED,WAAO,OAAP;AACD;AAED;AACA,eAAe,SAAkB,MAAlB,CAAyB;AACtC,UAAM,WADgC;AAGtC,QAHsC,kBAGlC;AACF,eAAO;AACL,6BAAiB,IADZ;AAEL,sBAAU,KAFL;AAGL,yBAAa;AAHR,SAAP;AAKD,KATqC;;AAWtC,WAAO;AACL,gBADK,oBACK,GADL,EACQ;AACX,gBAAI,GAAJ,EAAS;AAET,gBAAM,iBAAiB,KAAK,iBAAL,EAAvB;AACA,iBAAK,IAAI,QAAQ,CAAjB,EAAoB,QAAQ,eAAe,MAA3C,EAAmD,OAAnD,EAA4D;AAC1D,+BAAe,KAAf,EAAsB,QAAtB,GAAiC,KAAjC;AACD;AACF;AARI,KAX+B;AAsBtC,aAAS;AACP,yBADO,+BACU;AACf,gBAAI,KAAK,eAAT,EAA0B,OAAO,eAAe,KAAK,SAApB,CAAP;AAE1B,mBAAO,EAAP;AACD,SALM;AAMP,gCANO,sCAMiB;AACtB,gBAAM,SAAS,EAAf;AACA,gBAAM,iBAAiB,KAAK,iBAAL,EAAvB;AAEA,iBAAK,IAAI,QAAQ,CAAjB,EAAoB,QAAQ,eAAe,MAA3C,EAAmD,OAAnD,EAA4D;AAC1D,uBAAO,IAAP,kCAAe,eAAe,KAAf,EAAsB,6BAAtB,EAAf;AACD;AAED,mBAAO,MAAP;AACD,SAfM;AAgBP,qCAhBO,2CAgBsB;AAC3B,gBAAM,SAAS,CAAC,KAAK,GAAN,CAAf;AACA,gBAAI,KAAK,KAAL,CAAW,OAAf,EAAwB,OAAO,IAAP,CAAY,KAAK,KAAL,CAAW,OAAvB;AACxB,gBAAI,KAAK,OAAT,EAAkB,OAAO,IAAP,CAAY,KAAK,OAAjB;AAClB,mBAAO,IAAP,kCAAe,KAAK,wBAAL,EAAf;AAEA,mBAAO,MAAP;AACD;AAvBM;AAtB6B,CAAzB,CAAf","sourcesContent":["import Vue from 'vue'\r\n\r\nimport mixins from '../util/mixins'\r\n\r\ninterface options extends Vue {\r\n  $el: HTMLElement\r\n  $refs: {\r\n    content: HTMLElement\r\n  }\r\n  overlay?: HTMLElement\r\n}\r\n\r\ninterface DependentInstance extends Vue {\r\n  isActive?: boolean\r\n  isDependent?: boolean\r\n}\r\n\r\nfunction searchChildren (children: Vue[]): DependentInstance[] {\r\n  const results = []\r\n  for (let index = 0; index < children.length; index++) {\r\n    const child = children[index] as DependentInstance\r\n    if (child.isActive && child.isDependent) {\r\n      results.push(child)\r\n    } else {\r\n      results.push(...searchChildren(child.$children))\r\n    }\r\n  }\r\n\r\n  return results\r\n}\r\n\r\n/* @vue/component */\r\nexport default mixins<options>().extend({\r\n  name: 'dependent',\r\n\r\n  data () {\r\n    return {\r\n      closeDependents: true,\r\n      isActive: false,\r\n      isDependent: true\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    isActive (val) {\r\n      if (val) return\r\n\r\n      const openDependents = this.getOpenDependents()\r\n      for (let index = 0; index < openDependents.length; index++) {\r\n        openDependents[index].isActive = false\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    getOpenDependents (): any[] {\r\n      if (this.closeDependents) return searchChildren(this.$children)\r\n\r\n      return []\r\n    },\r\n    getOpenDependentElements (): HTMLElement[] {\r\n      const result = []\r\n      const openDependents = this.getOpenDependents()\r\n\r\n      for (let index = 0; index < openDependents.length; index++) {\r\n        result.push(...openDependents[index].getClickableDependentElements())\r\n      }\r\n\r\n      return result\r\n    },\r\n    getClickableDependentElements (): HTMLElement[] {\r\n      const result = [this.$el]\r\n      if (this.$refs.content) result.push(this.$refs.content)\r\n      if (this.overlay) result.push(this.overlay)\r\n      result.push(...this.getOpenDependentElements())\r\n\r\n      return result\r\n    }\r\n  }\r\n})\r\n"],"sourceRoot":""}