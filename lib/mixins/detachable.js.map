{"version":3,"sources":["../../src/mixins/detachable.js"],"names":[],"mappings":"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","sourcesContent":["import Bootable from './bootable'\r\nimport { consoleWarn } from '../util/console'\r\n\r\nfunction validateAttachTarget (val) {\r\n  const type = typeof val\r\n\r\n  if (type === 'boolean' || type === 'string') return true\r\n\r\n  return val.nodeType === Node.ELEMENT_NODE\r\n}\r\n\r\n/* @vue/component */\r\nexport default {\r\n  name: 'detachable',\r\n\r\n  mixins: [Bootable],\r\n\r\n  props: {\r\n    attach: {\r\n      type: null,\r\n      default: false,\r\n      validator: validateAttachTarget\r\n    },\r\n    contentClass: {\r\n      default: ''\r\n    }\r\n  },\r\n\r\n  data: () => ({\r\n    hasDetached: false\r\n  }),\r\n\r\n  watch: {\r\n    attach () {\r\n      this.hasDetached = false\r\n      this.initDetach()\r\n    },\r\n    hasContent: 'initDetach'\r\n  },\r\n\r\n  beforeMount () {\r\n    this.$nextTick(() => {\r\n      if (this.activatorNode) {\r\n        const activator = Array.isArray(this.activatorNode) ? this.activatorNode : [this.activatorNode]\r\n        activator.forEach(node => {\r\n          node.elm && this.$el.parentNode.insertBefore(node.elm, this.$el)\r\n        })\r\n      }\r\n    })\r\n  },\r\n\r\n  mounted () {\r\n    !this.lazy && this.initDetach()\r\n  },\r\n\r\n  deactivated () {\r\n    this.isActive = false\r\n  },\r\n\r\n  beforeDestroy () {\r\n    // IE11 Fix\r\n    try {\r\n      if (this.$refs.content) {\r\n        this.$refs.content.parentNode.removeChild(this.$refs.content)\r\n      }\r\n\r\n      if (this.activatorNode) {\r\n        const activator = Array.isArray(this.activatorNode) ? this.activatorNode : [this.activatorNode]\r\n        activator.forEach(node => {\r\n          node.elm && node.elm.parentNode.removeChild(node.elm)\r\n        })\r\n      }\r\n    } catch (e) { console.log(e) }\r\n  },\r\n\r\n  methods: {\r\n    getScopeIdAttrs () {\r\n      const scopeId = this.$vnode && this.$vnode.context.$options._scopeId\r\n      return scopeId && {\r\n        [scopeId]: ''\r\n      }\r\n    },\r\n    initDetach () {\r\n      if (this._isDestroyed ||\r\n        !this.$refs.content ||\r\n        this.hasDetached ||\r\n        // Leave menu in place if attached\r\n        // and dev has not changed target\r\n        this.attach === '' || // If used as a boolean prop (<v-menu attach>)\r\n        this.attach === true || // If bound to a boolean (<v-menu :attach=\"true\">)\r\n        this.attach === 'attach' // If bound as boolean prop in pug (v-menu(attach))\r\n      ) return\r\n\r\n      let target\r\n      if (this.attach === false) {\r\n        // Default, detach to app\r\n        target = document.querySelector('[data-app]')\r\n      } else if (typeof this.attach === 'string') {\r\n        // CSS selector\r\n        target = document.querySelector(this.attach)\r\n      } else {\r\n        // DOM Element\r\n        target = this.attach\r\n      }\r\n\r\n      if (!target) {\r\n        consoleWarn(`Unable to locate target ${this.attach || '[data-app]'}`, this)\r\n        return\r\n      }\r\n\r\n      target.insertBefore(\r\n        this.$refs.content,\r\n        target.firstChild\r\n      )\r\n\r\n      this.hasDetached = true\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}