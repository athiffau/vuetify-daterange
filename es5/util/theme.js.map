{"version":3,"sources":["../../src/util/theme.ts"],"names":[],"mappings":"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","sourcesContent":["import { colorToInt, intToHex, colorToHex, RGB } from './colorUtils'\r\nimport * as sRGB from './color/transformSRGB'\r\nimport * as LAB from './color/transformCIELAB'\r\nimport { VuetifyTheme } from 'vuetify/types'\r\n\r\ninterface ParsedThemeItem {\r\n  base: string\r\n  lighten5: string\r\n  lighten4: string\r\n  lighten3: string\r\n  lighten2: string\r\n  lighten1: string\r\n  darken1: string\r\n  darken2: string\r\n  darken3: string\r\n  darken4: string\r\n\r\n  [name: string]: string\r\n}\r\n\r\ninterface ParsedTheme {\r\n  [name: string]: ParsedThemeItem\r\n}\r\n\r\nexport function parse (theme: VuetifyTheme | Record<string, number | string>, isItem = false): ParsedTheme {\r\n  const colors = Object.keys(theme)\r\n  const parsedTheme: any = {}\r\n\r\n  for (let i = 0; i < colors.length; ++i) {\r\n    const name = colors[i]\r\n    const value = theme[name]\r\n\r\n    if (isItem) {\r\n      if (name === 'base' || name.startsWith('lighten') || name.startsWith('darken')) {\r\n        parsedTheme[name] = colorToHex(value)\r\n      }\r\n    } else if (typeof value === 'object') {\r\n      parsedTheme[name] = parse(value, true)\r\n    } else {\r\n      parsedTheme[name] = genVariations(name, colorToInt(value))\r\n    }\r\n  }\r\n\r\n  return parsedTheme\r\n}\r\n\r\n/**\r\n * Generate the CSS for a base color (.primary)\r\n */\r\nconst genBaseColor = (name: string, value: string): string => {\r\n  return `\r\n.${name} {\r\n  background-color: ${value} !important;\r\n  border-color: ${value} !important;\r\n}\r\n.${name}--text {\r\n  color: ${value} !important;\r\n  caret-color: ${value} !important;\r\n}`\r\n}\r\n\r\n/**\r\n * Generate the CSS for a variant color (.primary.darken-2)\r\n */\r\nconst genVariantColor = (name: string, variant: string, value: string): string => {\r\n  const [type, n] = variant.split(/(\\d)/, 2)\r\n  return `\r\n.${name}.${type}-${n} {\r\n  background-color: ${value} !important;\r\n  border-color: ${value} !important;\r\n}\r\n.${name}--text.text--${type}-${n} {\r\n  color: ${value} !important;\r\n  caret-color: ${value} !important;\r\n}`\r\n}\r\n\r\nconst genColorVariableName = (name: string, variant = 'base'): string => `--v-${name}-${variant}`\r\n\r\nconst genColorVariable = (name: string, variant = 'base'): string => `var(${genColorVariableName(name, variant)})`\r\n\r\nexport function genStyles (theme: ParsedTheme, cssVar = false): string {\r\n  const colors = Object.keys(theme)\r\n\r\n  if (!colors.length) return ''\r\n\r\n  let variablesCss = ''\r\n  let css = ''\r\n\r\n  const aColor = cssVar ? genColorVariable('primary') : theme.primary.base\r\n  css += `a { color: ${aColor}; }`\r\n\r\n  for (let i = 0; i < colors.length; ++i) {\r\n    const name = colors[i]\r\n    const value = theme[name]\r\n\r\n    if (typeof value !== 'object') continue\r\n\r\n    css += genBaseColor(name, cssVar ? genColorVariable(name) : value.base)\r\n    cssVar && (variablesCss += `  ${genColorVariableName(name)}: ${value.base};\\n`)\r\n\r\n    const variants = Object.keys(value)\r\n    for (let i = 0; i < variants.length; ++i) {\r\n      const variant = variants[i]\r\n      const variantValue = value[variant]\r\n      if (variant === 'base') continue\r\n\r\n      css += genVariantColor(name, variant, cssVar ? genColorVariable(name, variant) : variantValue)\r\n      cssVar && (variablesCss += `  ${genColorVariableName(name, variant)}: ${variantValue};\\n`)\r\n    }\r\n  }\r\n\r\n  if (cssVar) {\r\n    variablesCss = `:root {\\n${variablesCss}}\\n\\n`\r\n  }\r\n\r\n  return variablesCss + css\r\n}\r\n\r\nexport function genVariations (name: string, value: RGB): Record<string, string> {\r\n  const values: Record<string, string> = {\r\n    base: intToHex(value)\r\n  }\r\n\r\n  for (let i = 5; i > 0; --i) {\r\n    values[`lighten${i}`] = intToHex(lighten(value, i))\r\n  }\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    values[`darken${i}`] = intToHex(darken(value, i))\r\n  }\r\n\r\n  return values\r\n}\r\n\r\nfunction lighten (value: RGB, amount: number): RGB {\r\n  const lab = LAB.fromXYZ(sRGB.toXYZ(value))\r\n  lab[0] = lab[0] + amount * 10\r\n  return sRGB.fromXYZ(LAB.toXYZ(lab))\r\n}\r\n\r\nfunction darken (value: RGB, amount: number): RGB {\r\n  const lab = LAB.fromXYZ(sRGB.toXYZ(value))\r\n  lab[0] = lab[0] - amount * 10\r\n  return sRGB.fromXYZ(LAB.toXYZ(lab))\r\n}\r\n"],"sourceRoot":""}