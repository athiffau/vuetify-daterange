{"version":3,"sources":["../../../src/components/VWindow/VWindowItem.ts"],"names":[],"mappings":"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","sourcesContent":["// Components\r\nimport VWindow from './VWindow'\r\n\r\n// Mixins\r\nimport Bootable from '../../mixins/bootable'\r\nimport { factory as GroupableFactory } from '../../mixins/groupable'\r\n\r\n// Directives\r\nimport Touch from '../../directives/touch'\r\n\r\n// Utilities\r\nimport { convertToUnit } from '../../util/helpers'\r\nimport { ExtractVue } from './../../util/mixins'\r\nimport mixins from '../../util/mixins'\r\n\r\n// Types\r\nimport Vue, { VNode } from 'vue'\r\n\r\ntype VBaseWindow = InstanceType<typeof VWindow>\r\n\r\ninterface options extends Vue {\r\n  $el: HTMLElement\r\n  windowGroup: VBaseWindow\r\n}\r\n\r\nexport default mixins<options & ExtractVue<[typeof Bootable]>>(\r\n  Bootable,\r\n  GroupableFactory('windowGroup', 'v-window-item', 'v-window')\r\n  /* @vue/component */\r\n).extend({\r\n  name: 'v-window-item',\r\n\r\n  directives: {\r\n    Touch\r\n  },\r\n\r\n  props: {\r\n    reverseTransition: {\r\n      type: [Boolean, String],\r\n      default: undefined\r\n    },\r\n    transition: {\r\n      type: [Boolean, String],\r\n      default: undefined\r\n    },\r\n    value: {\r\n      required: false\r\n    }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      done: null as null | (() => void),\r\n      isActive: false,\r\n      wasCancelled: false\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    computedTransition (): string | boolean {\r\n      if (!this.windowGroup.internalReverse) {\r\n        return typeof this.transition !== 'undefined'\r\n          ? this.transition || ''\r\n          : this.windowGroup.computedTransition\r\n      }\r\n\r\n      return typeof this.reverseTransition !== 'undefined'\r\n        ? this.reverseTransition || ''\r\n        : this.windowGroup.computedTransition\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.$el.addEventListener('transitionend', this.onTransitionEnd, false)\r\n  },\r\n\r\n  beforeDestroy () {\r\n    this.$el.removeEventListener('transitionend', this.onTransitionEnd, false)\r\n  },\r\n\r\n  methods: {\r\n    genDefaultSlot () {\r\n      return this.$slots.default\r\n    },\r\n    onAfterEnter () {\r\n      if (this.wasCancelled) {\r\n        this.wasCancelled = false\r\n        return\r\n      }\r\n\r\n      requestAnimationFrame(() => {\r\n        this.windowGroup.internalHeight = undefined\r\n        this.windowGroup.isActive = false\r\n      })\r\n    },\r\n    onBeforeEnter () {\r\n      this.windowGroup.isActive = true\r\n    },\r\n    onLeave (el: HTMLElement) {\r\n      this.windowGroup.internalHeight = convertToUnit(el.clientHeight)\r\n    },\r\n    onEnterCancelled () {\r\n      this.wasCancelled = true\r\n    },\r\n    onEnter (el: HTMLElement, done: () => void) {\r\n      const isBooted = this.windowGroup.isBooted\r\n\r\n      if (isBooted) this.done = done\r\n\r\n      requestAnimationFrame(() => {\r\n        if (!this.computedTransition) return done()\r\n\r\n        this.windowGroup.internalHeight = convertToUnit(el.clientHeight)\r\n\r\n        // On initial render, there is no transition\r\n        // Vue leaves a `enter` transition class\r\n        // if done is called too fast\r\n        !isBooted && setTimeout(done, 100)\r\n      })\r\n    },\r\n    onTransitionEnd (e: TransitionEvent) {\r\n      // This ensures we only call done\r\n      // when the element transform\r\n      // completes\r\n      if (\r\n        e.propertyName !== 'transform' ||\r\n        e.target !== this.$el ||\r\n        !this.done\r\n      ) return\r\n\r\n      this.done()\r\n      this.done = null\r\n    }\r\n  },\r\n\r\n  render (h): VNode {\r\n    const div = h('div', {\r\n      staticClass: 'v-window-item',\r\n      directives: [{\r\n        name: 'show',\r\n        value: this.isActive\r\n      }],\r\n      on: this.$listeners\r\n    }, this.showLazyContent(this.genDefaultSlot()))\r\n\r\n    return h('transition', {\r\n      props: {\r\n        name: this.computedTransition\r\n      },\r\n      on: {\r\n        afterEnter: this.onAfterEnter,\r\n        beforeEnter: this.onBeforeEnter,\r\n        leave: this.onLeave,\r\n        enter: this.onEnter,\r\n        enterCancelled: this.onEnterCancelled\r\n      }\r\n    }, [div])\r\n  }\r\n})\r\n"],"sourceRoot":""}