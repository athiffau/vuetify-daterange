{"version":3,"sources":["../../../src/components/VCalendar/VCalendar.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\r\n// import '../../stylus/components/_calendar-daily.styl'\r\n\r\n// Types\r\nimport { VNode, Component } from 'vue'\r\n\r\n// Mixins\r\nimport CalendarBase from './mixins/calendar-base'\r\n\r\n// Util\r\nimport props from './util/props'\r\nimport {\r\n  DAYS_IN_MONTH_MAX,\r\n  DAY_MIN,\r\n  DAYS_IN_WEEK,\r\n  VTimestamp,\r\n  VTime,\r\n  parseTimestamp,\r\n  relativeDays,\r\n  nextDay,\r\n  prevDay,\r\n  copyTimestamp,\r\n  updateFormatted,\r\n  updateWeekday,\r\n  updateRelative\r\n} from './util/timestamp'\r\n\r\n// Calendars\r\nimport VCalendarMonthly from './VCalendarMonthly'\r\nimport VCalendarDaily from './VCalendarDaily'\r\nimport VCalendarWeekly from './VCalendarWeekly'\r\n\r\n// Types\r\ninterface VCalendarRenderProps {\r\n  start: VTimestamp\r\n  end: VTimestamp\r\n  component: string | Component\r\n  maxDays: number\r\n}\r\n\r\n/* @vue/component */\r\nexport default CalendarBase.extend({\r\n  name: 'v-calendar',\r\n\r\n  props: {\r\n    ...props.calendar,\r\n    ...props.weeks,\r\n    ...props.intervals\r\n  },\r\n\r\n  data: () => ({\r\n    lastStart: null as VTimestamp | null,\r\n    lastEnd: null as VTimestamp | null\r\n  }),\r\n\r\n  computed: {\r\n    parsedValue (): VTimestamp {\r\n      return parseTimestamp(this.value) ||\r\n        this.parsedStart ||\r\n        this.times.today\r\n    },\r\n    renderProps (): VCalendarRenderProps {\r\n      const around = this.parsedValue\r\n      let component: any = 'div'\r\n      let maxDays = this.maxDays\r\n      let start = around\r\n      let end = around\r\n      switch (this.type) {\r\n        case 'month':\r\n          component = VCalendarMonthly\r\n          start = this.getStartOfMonth(around)\r\n          end = this.getEndOfMonth(around)\r\n          break\r\n        case 'week':\r\n          component = VCalendarDaily\r\n          start = this.getStartOfWeek(around)\r\n          end = this.getEndOfWeek(around)\r\n          maxDays = 7\r\n          break\r\n        case 'day':\r\n          component = VCalendarDaily\r\n          maxDays = 1\r\n          break\r\n        case '4day':\r\n          component = VCalendarDaily\r\n          end = relativeDays(copyTimestamp(end), nextDay, 4)\r\n          updateFormatted(end)\r\n          maxDays = 4\r\n          break\r\n        case 'custom-weekly':\r\n          component = VCalendarWeekly\r\n          start = this.parsedStart || around\r\n          end = this.parsedEnd\r\n          break\r\n        case 'custom-daily':\r\n          component = VCalendarDaily\r\n          start = this.parsedStart || around\r\n          end = this.parsedEnd\r\n          break\r\n      }\r\n\r\n      return { component, start, end, maxDays }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    renderProps: 'checkChange'\r\n  },\r\n\r\n  methods: {\r\n    checkChange (): void {\r\n      const { start, end } = this.renderProps\r\n      if (start !== this.lastStart || end !== this.lastEnd) {\r\n        this.lastStart = start\r\n        this.lastEnd = end\r\n        this.$emit('change', { start, end })\r\n      }\r\n    },\r\n    move (amount = 1): void {\r\n      const moved = copyTimestamp(this.parsedValue)\r\n      const forward = amount > 0\r\n      const mover = forward ? nextDay : prevDay\r\n      const limit = forward ? DAYS_IN_MONTH_MAX : DAY_MIN\r\n      let times = forward ? amount : -amount\r\n\r\n      while (--times >= 0) {\r\n        switch (this.type) {\r\n          case 'month':\r\n            moved.day = limit\r\n            mover(moved)\r\n            break\r\n          case 'week':\r\n            relativeDays(moved, mover, DAYS_IN_WEEK)\r\n            break\r\n          case 'day':\r\n            mover(moved)\r\n            break\r\n          case '4day':\r\n            relativeDays(moved, mover, 4)\r\n            break\r\n        }\r\n      }\r\n\r\n      updateWeekday(moved)\r\n      updateFormatted(moved)\r\n      updateRelative(moved, this.times.now)\r\n\r\n      this.$emit('input', moved.date)\r\n      this.$emit('moved', moved)\r\n    },\r\n    next (amount = 1): void {\r\n      this.move(amount)\r\n    },\r\n    prev (amount = 1): void {\r\n      this.move(-amount)\r\n    },\r\n    timeToY (time: VTime, clamp = true): number | false {\r\n      const c = this.$children[0] as any\r\n      if (c && c.timeToY) {\r\n        return c.timeToY(time, clamp)\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    minutesToPixels (minutes: number): number {\r\n      const c = this.$children[0] as any\r\n      if (c && c.minutesToPixels) {\r\n        return c.minutesToPixels(minutes)\r\n      } else {\r\n        return -1\r\n      }\r\n    },\r\n    scrollToTime (time: VTime): boolean {\r\n      const c = this.$children[0] as any\r\n      if (c && c.scrollToTime) {\r\n        return c.scrollToTime(time)\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n  },\r\n\r\n  render (h): VNode {\r\n    const { start, end, maxDays, component } = this.renderProps\r\n\r\n    return h(component, {\r\n      staticClass: 'v-calendar',\r\n      props: {\r\n        ...this.$props,\r\n        start: start.date,\r\n        end: end.date,\r\n        maxDays\r\n      },\r\n      on: {\r\n        ...this.$listeners,\r\n        'click:date': (day: VTimestamp) => {\r\n          if (this.$listeners['input']) {\r\n            this.$emit('input', day)\r\n          }\r\n          if (this.$listeners['click:date']) {\r\n            this.$emit('click:date', day)\r\n          }\r\n        }\r\n      },\r\n      scopedSlots: this.$scopedSlots\r\n    })\r\n  }\r\n})\r\n"],"sourceRoot":""}