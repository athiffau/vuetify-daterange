{"version":3,"sources":["../../../src/components/VRangeSlider/VRangeSlider.js"],"names":[],"mappings":"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","sourcesContent":["// Styles\r\nimport '../../stylus/components/_range-sliders.styl'\r\n\r\n// Extensions\r\nimport VSlider from '../VSlider'\r\n\r\nimport {\r\n  createRange,\r\n  deepEqual\r\n} from '../../util/helpers'\r\n\r\n/* @vue/component */\r\nexport default {\r\n  name: 'v-range-slider',\r\n\r\n  extends: VSlider,\r\n\r\n  props: {\r\n    value: {\r\n      type: Array,\r\n      default: () => ([])\r\n    }\r\n  },\r\n\r\n  data: vm => ({\r\n    activeThumb: null,\r\n    lazyValue: !vm.value.length\r\n      ? [0, 0]\r\n      : vm.value\r\n  }),\r\n\r\n  computed: {\r\n    classes () {\r\n      return Object.assign({}, {\r\n        'v-input--range-slider': true\r\n      }, VSlider.options.computed.classes.call(this))\r\n    },\r\n    internalValue: {\r\n      get () {\r\n        return this.lazyValue\r\n      },\r\n      set (val) {\r\n        const { min, max } = this\r\n        // Round value to ensure the\r\n        // entire slider range can\r\n        // be selected with step\r\n        let value = val.map(v => this.roundValue(Math.min(Math.max(v, min), max)))\r\n\r\n        // Switch values if range and wrong order\r\n        if (value[0] > value[1] || value[1] < value[0]) {\r\n          if (this.activeThumb !== null) this.activeThumb = this.activeThumb === 1 ? 0 : 1\r\n          value = [value[1], value[0]]\r\n        }\r\n\r\n        this.lazyValue = value\r\n        if (!deepEqual(value, this.value)) this.$emit('input', value)\r\n\r\n        this.validate()\r\n      }\r\n    },\r\n    inputWidth () {\r\n      return this.internalValue.map(v => (\r\n        this.roundValue(v) - this.min) / (this.max - this.min) * 100\r\n      )\r\n    },\r\n    isDirty () {\r\n      return this.internalValue.some(v => v !== this.min) || this.alwaysDirty\r\n    },\r\n    trackFillStyles () {\r\n      const styles = VSlider.options.computed.trackFillStyles.call(this)\r\n      const fillPercent = Math.abs(this.inputWidth[0] - this.inputWidth[1])\r\n\r\n      styles.width = `calc(${fillPercent}% - ${this.trackPadding}px)`\r\n      styles[this.$vuetify.rtl ? 'right' : 'left'] = `${this.inputWidth[0]}%`\r\n\r\n      return styles\r\n    },\r\n    trackPadding () {\r\n      if (this.isDirty ||\r\n        this.internalValue[0]\r\n      ) return 0\r\n\r\n      return VSlider.options.computed.trackPadding.call(this)\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    getIndexOfClosestValue (arr, v) {\r\n      if (Math.abs(arr[0] - v) < Math.abs(arr[1] - v)) return 0\r\n      else return 1\r\n    },\r\n    genInput () {\r\n      return createRange(2).map(i => {\r\n        const input = VSlider.options.methods.genInput.call(this)\r\n\r\n        input.data.attrs.value = this.internalValue[i]\r\n\r\n        input.data.on.focus = e => {\r\n          this.activeThumb = i\r\n          VSlider.options.methods.onFocus.call(this, e)\r\n        }\r\n\r\n        return input\r\n      })\r\n    },\r\n    genChildren () {\r\n      return [\r\n        this.genInput(),\r\n        this.genTrackContainer(),\r\n        this.genSteps(),\r\n        createRange(2).map(i => {\r\n          const value = this.internalValue[i]\r\n          const onDrag = e => {\r\n            this.isActive = true\r\n            this.activeThumb = i\r\n            this.onThumbMouseDown(e)\r\n          }\r\n          const valueWidth = this.inputWidth[i]\r\n          const isActive = (this.isFocused || this.isActive) && this.activeThumb === i\r\n\r\n          return this.genThumbContainer(value, valueWidth, isActive, onDrag)\r\n        })\r\n      ]\r\n    },\r\n    onSliderClick (e) {\r\n      if (!this.isActive) {\r\n        this.isFocused = true\r\n        this.onMouseMove(e, true)\r\n        this.$emit('change', this.internalValue)\r\n      }\r\n    },\r\n    onMouseMove (e, trackClick = false) {\r\n      const { value, isInsideTrack } = this.parseMouseMove(e)\r\n\r\n      if (isInsideTrack) {\r\n        if (trackClick) this.activeThumb = this.getIndexOfClosestValue(this.internalValue, value)\r\n\r\n        this.setInternalValue(value)\r\n      }\r\n    },\r\n    onKeyDown (e) {\r\n      const value = this.parseKeyDown(e, this.internalValue[this.activeThumb])\r\n\r\n      if (value == null) return\r\n\r\n      this.setInternalValue(value)\r\n    },\r\n    setInternalValue (value) {\r\n      this.internalValue = this.internalValue.map((v, i) => {\r\n        if (i === this.activeThumb) return value\r\n        else return Number(v)\r\n      })\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}